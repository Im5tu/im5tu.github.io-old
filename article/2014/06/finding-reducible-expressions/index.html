<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Finding Reducible Expressions - Stuart Blackler&#39;s Blog</title>
    <link rel="canonical" href="https://im5tu.io/article/2014/06/finding-reducible-expressions/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <meta name="description" content="This post details the Expressions that can be reduced in the System.Linq.Expressions namespace.">
    
    
    <meta property="og:title" content="Finding Reducible Expressions - Stuart Blackler&#39;s Blog" />
<meta property="og:type" content="website" />

<meta property="og:description" content="This post details the Expressions that can be reduced in the System.Linq.Expressions namespace.">

<meta property="og:url" content="https://im5tu.io/article/2014/06/finding-reducible-expressions/" />
<meta property="og:image" content="https://im5tu.io/img/profile.jpg" />
<meta property="og:site_name" content="Stuart Blackler&#39;s Blog" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@im5tu" />

<style>html, body {
  height: 100%;
  color: #303030;
  font-family: "Noto Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-display: auto;
}

h1, h2, h3, h4, h5, h6 {
  font-family: "Comfortaa", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-display: auto;
}

p {
  margin: 1.5em 0;
}

blockquote {
  border-left: 5px solid #454545;
  background-color: #fafafa;
  padding: 0.5em 1.5em;
}
blockquote, blockquote p {
  color: #494949;
}
blockquote ~ blockquote {
  margin-top: 0;
  margin-bottom: 0;
}

.pageContainer {
  text-align: justify;
}

.pageWrap {
  margin: 0 auto;
  max-width: 1400px;
}
@media screen and (min-width: 320px) {
  .pageWrap {
    width: 97%;
  }
}
@media screen and (min-width: 740px) {
  .pageWrap {
    width: 90%;
  }
}
@media screen and (min-width: 980px) {
  .pageWrap {
    width: 80%;
  }
}
.pageWrap:after {
  content: "";
  display: table;
  clear: both;
}

a {
  font-family: "Comfortaa", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-display: auto;
}
a:link, a:visited {
  color: #149fd1;
}
a:link {
  text-decoration: none;
}
a:hover {
  color: #2db9eb;
  text-decoration: underline;
}

#pageHeader-about {
  border-bottom: 1px solid #eaeaea;
}

#pageHeader-about-title a {
  font-size: 1.2em;
}
#pageHeader-about-title a:link, #pageHeader-about-title a:visited {
  color: #232323;
}
#pageHeader-about-title a:first-child {
  font-size: 1.1em;
  color: #149fd1;
  text-transform: none;
}

.article-list a {
  color: #0a0a0a;
}
.article-list a:hover {
  color: #2db9eb;
  text-decoration: underline;
}

.article-content p code, .article-content li code {
  color: #149fd1;
  background-color: rgba(27, 31, 35, 0.05);
}
.article-content p code:hover, .article-content li code:hover {
  opacity: 0.5;
}

.article img {
  max-width: 100%;
}

.copy-code-button {
  float: right;
  display: block;
  padding: 3px 8px;
  font-size: 0.8em;
  background-color: #e2e2e2;
  border: 1px solid #e2e2e2;
  border-radius: 0 0 10px 10px;
  -webkit-transition: all 250ms ease;
  transition: all 250ms ease;
  opacity: 0;
}
.copy-code-button:hover {
  cursor: pointer;
  opacity: 0.7;
  border-style: solid;
}
.copy-code-button:focus {
  background-color: #e2e2e2;
  outline: 0;
  border-style: solid;
}
.copy-code-button:active {
  background-color: #e2e2e2;
  opacity: 0.5;
  border-style: solid;
}

pre:hover .copy-code-button {
  opacity: 1;
}

.copy-code-button ~ pre {
  position: relative;
}

@media print {
  .copy-code-button {
    display: none;
  }
}</style>
<link href="https://fonts.googleapis.com/css?family=Comfortaa|Noto+Sans&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/tomorrow.min.css" rel="stylesheet"><link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Stuart Blackler&#39;s Blog" /></head>
<body>
<section class="pageContainer">
    <header id="pageHeader">
    <section id="pageHeader-about" class="pageWrap" itemscope itemtype="http://schema.org/person">
        <section id="pageHeader-about-title">
            <h1 itemprop="name"><a href="/" title="Stuart Blackler">@im5tu</a> / <a href="https://im5tu.io/article/2014/06/finding-reducible-expressions/">Finding Reducible Expressions</a></h1>
        </section>
    </section>
</header>
    <section class="pageContainer-content pageWrap">
        <article class="article" itemscope itemtype="http://schema.org/blog">
    <section class="article-content" itemprop="text"><p>Today I just wanted to share a quick note regarding <a href="http://stackoverflow.com/a/2040097/315711">a Stack Overflow answer</a> that I recently came across. In the answer the author explains that a call to <code>Expression.CanReduce</code> will typically return false, while <code>Expression.Reduce()</code> will return the current expression. The author continues to state that one of the types that overrides <code>Expression.Reduce()</code> and <code>Expression.CanReduce</code> is <code>MemberInitExpression</code>.</p>
<p>I wanted to find out when <code>Expression.CanReduce</code> would actually return <code>true</code>. I discovered the <a href="http://www.codeplex.com/Download?ProjectName=dlr&amp;DownloadId=246540">173 page Expression Tree Specification</a> which provides an additional insight to <code>CanReduce</code> and <code>Reduce()</code>.</p>
<h3 id="canreduce">CanReduce</h3>
<blockquote>
<p>This property returns whether the Reduce method returns a different but semantically equivalent ET.  By default, this property returns false.</p>
</blockquote>
<blockquote>
<p>In the typical case, the resulting ET contains all common ET nodes suitable for passing to any common compilation or ET processing code.  Sometimes the result is only partially reduced, and when walking the resulting ET, you'll need to further reduce some nodes.</p>
</blockquote>
<blockquote>
<p>The value returned by this property should never change for a given object.</p>
</blockquote>
<blockquote>
<p>Signature:</p>
</blockquote>
<pre><code>public virtual Boolean CanReduce { get; }
</code></pre>
<h3 id="reduce">Reduce</h3>
<blockquote>
<p>This method returns a semantically equivalent ET representing the same expression.  By default, this method returns the object on which it was invoked.</p>
</blockquote>
<blockquote>
<p>Typically the result comprises only common ET types, ET nodes suitable for passing to any compilation or ET processing code.  Usually the result is only partially reduced (that is, only the root node).  You'll probably need to further reduce some nodes.</p>
</blockquote>
<blockquote>
<p>Signature:</p>
</blockquote>
<pre><code>public virtual Expression Reduce();
</code></pre>
<h3 id="reducible-types-inside-systemlinqexpressions">Reducible Types Inside System.Linq.Expressions</h3>
<p>Using <a href="http://www.telerik.com/products/decompiler.aspx">Telerik's JustDecompile</a>, I went through each public class to see which had an override on either <code>CanReduce</code> or <code>Reduce()</code>. The result came up with the following list:</p>
<ul>
<li><a href="http://msdn.microsoft.com/en-us/library/system.linq.expressions.binaryexpression.aspx">BinaryExpression</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/system.linq.expressions.listinitexpression.aspx">ListInitExpression</a></li>
<li><a href="http://msdn.microsoft.com/en-GB/library/system.linq.expressions.memberinitexpression.aspx">MemberInitExpression</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/system.linq.expressions.unaryexpression.aspx">UnaryExpression</a></li>
</ul>
<p>Furthermore, I searched for descendant types of the list above and found the following reducible classes that were marked as internal, as such I couldn't find any official documentation for them:</p>
<ul>
<li>AssignBinaryExpression</li>
<li>CoalesceConversionBinaryExpression</li>
<li>LogicalBinaryExpression</li>
<li>SimpleBinaryExpression</li>
</ul>
<h3 id="further-reading">Further Reading</h3>
<p>Inside the expression tree specification, I would also be inclined to read section 2.2 entitled <em>Reducible Nodes</em>.</p>
<p>If there are any additional expressions that can be reduced that I have missed, please send me a message and I will add it to the list.</p></section>
    <footer class="article-footer">
        <hr /></footer>
</article>
    </section>
    <footer id="pageFooter" class="pageWrap">
    <p>&copy; 2020 <span itemprop="author">Stuart Blackler</span>. Last Updated: <time itemprop="datecreated" class="article-header-time" pubdate="pubdate" datetime="2014-06-24T09:21:19">2014-06-24 09:21:19 &#43;0000 UTC</time>. <a id="pageFooter-scroll-link" href="#">Scroll To Top</a>.</p>
</footer>
</section>
<script src="/js/site-54e01995.js" defer></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-88036425-1', 'auto');
  ga('send', 'pageview');
</script>


<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>