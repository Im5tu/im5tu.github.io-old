<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Stuart Blackler"><meta name=description content="A quick introduction to URL Rewrite module for IIS and a snippet from going from HTTP to HTTPS."><meta name=keywords content=",IIS,Url Rewrite"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://im5tu.io/article/2017/06/up-and-running-with-url-rewrite-going-from-http-to-https/><title>Up and running with URL Rewrite - going from HTTP to HTTPS :: Stuart Blackler's Blog</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.de188b3201233c251f4fd6306dbd2cb41e408fb8846c09781b2925de7df5025c.css><meta itemprop=name content="Up and running with URL Rewrite - going from HTTP to HTTPS"><meta itemprop=description content="A quick introduction to URL Rewrite module for IIS and a snippet from going from HTTP to HTTPS."><meta itemprop=datePublished content="2017-06-03T15:00:51+01:00"><meta itemprop=dateModified content="2017-06-03T15:00:51+01:00"><meta itemprop=wordCount content="605"><meta itemprop=keywords content="IIS,Url Rewrite,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Up and running with URL Rewrite - going from HTTP to HTTPS"><meta name=twitter:description content="A quick introduction to URL Rewrite module for IIS and a snippet from going from HTTP to HTTPS."><meta property="og:title" content="Up and running with URL Rewrite - going from HTTP to HTTPS"><meta property="og:description" content="A quick introduction to URL Rewrite module for IIS and a snippet from going from HTTP to HTTPS."><meta property="og:type" content="article"><meta property="og:url" content="https://im5tu.io/article/2017/06/up-and-running-with-url-rewrite-going-from-http-to-https/"><meta property="article:published_time" content="2017-06-03T15:00:51+01:00"><meta property="article:modified_time" content="2017-06-03T15:00:51+01:00"><meta property="article:section" content="Development"><meta property="article:published_time" content="2017-06-03 15:00:51 +0100 BST"><link rel=alternate type=application/rss+xml href=https://im5tu.io/article/2017/06/up-and-running-with-url-rewrite-going-from-http-to-https/index.xml title="Stuart Blackler's Blog"><meta property="og:image" content="https://im5tu.io/img/profile.jpg"><meta property="og:site_name" content="Stuart Blackler's Blog"><link rel=alternate type=application/rss+xml href=/index.xml title="Stuart Blackler's Blog"><link rel=preconnect href=https://api.github.com><link rel=preconnect href=https://partner.googleadservices.com><link rel=preconnect href=https://tpc.googlesyndication.com><link rel=preconnect href=https://www.googletagservices.com><link rel=preconnect href=https://googleads.g.doubleclick.net><link rel=preconnect href=https://pagead2.googlesyndication.com><link rel=preload href=/fonts/Inter-UI-Bold.woff2><link rel=preload href=/fonts/Inter-UI-Regular.woff2><style>.post{max-width:1200px}.header__inner{width:100%;max-width:1160px}.toolbar{display:none!important}.copy-code-button{float:right;display:block;padding:8px 12px;font-size:.9em;background-color:#e2e2e2;border-left:1px solid #e2e2e2;border-bottom:1px solid #e2e2e2;border-radius:0;border-bottom-left-radius:10px;transition:all 250ms ease;margin:-18px;opacity:0}.copy-code-button:hover{cursor:pointer;opacity:.7;border-style:solid}.copy-code-button:focus{background-color:#e2e2e2;outline:0;border-style:solid}.copy-code-button:active{background-color:#e2e2e2;opacity:.5;border-style:solid}pre:hover .copy-code-button{opacity:1}.copy-code-button~pre{position:relative}table{width:100%;border-collapse:collapse}table th{background-color:#cecece;color:#222}table tr{margin:0;padding:0}table tr:first-child{border-left:1px solid #acacac;border-top:1px solid #acacac;border-right:1px solid #acacac}table tr td:first-child{border-left:1px solid #acacac}table tr td:last-child{border-right:1px solid #acacac}table td,table th{padding:.5em;border-bottom:1px solid #acacac;margin:0}h2 a:link,h2 a:visited,h3 a:link,h3 a:visited,h4 a:link,h4 a:visited,h5 a:link,h5 a:visited{text-decoration:none}h2 a:hover,h3 a:hover,h4 a:hover,h5 a:hover{text-decoration:underline}@media print{.copy-code-button{display:none}}@media(prefers-color-scheme:dark){.copy-code-button{background-color:#969696;color:#323232}}</style><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-88036425-1','auto');ga('send','pageview');</script><script data-ad-client=ca-pub-8597760177900459 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>im5tu.io</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/article/>Articles</a></li><li><a href=/article/index.xml>RSS Feed</a></li><li><a href=https://bit.ly/im5tu-tw>Twitter</a></li><li><a href=https://bit.ly/im5tu-yt>YouTube</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>3 minutes</p></div><article><h1 class=post-title><a href=https://im5tu.io/article/2017/06/up-and-running-with-url-rewrite-going-from-http-to-https/>Up and running with URL Rewrite - going from HTTP to HTTPS</a></h1><div class=post-content><section class="series series-header"><p><i>This article is part of the <a href=#series>Url Rewriting</a> series. You are reading part 1 of 6.</i></p></section><p>In this series, I am going to take you through a few <code>web.config</code> snippets that have come in handy for me when using URL Rewrite on IIS. Firstly, I am going to introduce the URL Rewrite module then show a sample of going from HTTP to HTTPS.</p><h2 id=what-is-url-rewrite>What is URL Rewrite?</h2><p><a href=https://www.iis.net/downloads/microsoft/url-rewrite>URL Rewrite</a> is a module extensions for IIS which allows administrators to create powerful inbound and outbound rules that alter a HTTP request or response. Scenarios where you might consider using the URL Rewrite module include:</p><ul><li>Rewrite URLs based on the values of server variables or HTTP headers</li><li>Provide SEO benefits such as canonical host names</li><li>Setup redirects from old posts to new</li></ul><p><em>URL rewrite can be install from the <a href="http://go.microsoft.com/fwlink/?LinkID=615137">Web Platform Installer</a> for IIS 7.5 or above.</em></p><h2 id=url-rewrite-and-webconfig>URL Rewrite and Web.Config</h2><p>Inside of the <code>web.config</code> you can define a <code>&lt;rewrite></code> section beneath the <code>&lt;system.web></code> section:</p><pre><code class=language-xml>&lt;system.web&gt;
    &lt;rewrite&gt;
        &lt;!-- Your rules here --&gt;
    &lt;/rewrite&gt;
&lt;/system.web&gt;
</code></pre><p>Within the <code>&lt;rewrite></code> section you can define either a <code>&lt;rules></code> section or an <code>&lt;outbound></code> section. The former is for inbound request rewriting and the latter is for response rewriting. I&rsquo;ll expand on each section as we go through the series.</p><p><em><strong>Note:</strong> if you don&rsquo;t have the URL Rewrite module installed, you&rsquo;ll get a lovely yellow screen of death when you start your application.</em></p><h2 id=redirecting-http-to-https>Redirecting HTTP to HTTPS</h2><p>The are some obvious benefits to serving pages over a secure connection (HTTPS), which include:</p><ul><li>Encryption: The data exchanged between client and server cannot easily be read</li><li>Authority: Proving that the server you are talking to is who you are expecting to talk to</li></ul><p>However, there are a few lesser known benefits including:</p><ul><li>SEO: Search engines are preferring websites that are secure by default</li><li>HTTP2: Major browsers do not support HTTP2 over insecure connections</li></ul><p>Assuming you would like all of the above benefit, here is the rule snippet that you will need:</p><pre><code class=language-xml>&lt;system.web&gt;
    &lt;rewrite&gt;
        &lt;rules&gt;
            &lt;rule name=&quot;Redirect to http&quot; patternSyntax=&quot;Wildcard&quot; stopProcessing=&quot;true&quot;&gt;
            &lt;match url=&quot;*&quot; negate=&quot;false&quot; /&gt;
            &lt;conditions logicalGrouping=&quot;MatchAny&quot; trackAllCaptures=&quot;false&quot;&gt;
                    &lt;add input=&quot;{HTTPS}&quot; pattern=&quot;off&quot; /&gt;
                &lt;/conditions&gt;
            &lt;action type=&quot;Redirect&quot; url=&quot;https://{HTTP_HOST}/{R:1}&quot; redirectType=&quot;Temporary&quot; /&gt;
        &lt;/rule&gt;
        &lt;/rules&gt;
    &lt;/rewrite&gt;
&lt;/system.web&gt;
</code></pre><p>So what&rsquo;s going on in the snippet above?</p><p>In the first line, we are defining the name of the rule which can be viewed inside of <code>inetmgr (IIS Manager)</code>; saying which pattern style we are going to use (either regex or wildcard) and saying that we want to stop at this rule and return the response to the client. Next up, we give our matching criteria which we have wildcarded to match all requests. Then we have added a condition which takes a server variable (<code>{HTTPS}</code> which indicates whether or not this request has been delivered over a secure connection), and made sure we only track insecure requests.</p><p><em>With conditions inside of a rule, you can match a single entry in the condition set or all the conditions within the set. Use either <code>MatchAny</code> or <code>MatchAll</code> depending on your needs.</em></p><p>Finally, we define the action that we wish to take if both the <code>match</code> and <code>conditions</code> sections have been satisfied. The action <code>type</code> can be <code>Redirect</code> or <code>Rewrite</code> depending on your needs. We wish to redirect a user to a secure connection, so we define the type as <code>Redirect</code> and the url equal to a secure connection to the host requested with the original path & query appended. The final attribute is the redirect type which can be one of the following:</p><ul><li>Permenant: <a href=https://httpstatuses.com/301>A HTTP 301 Response</a></li><li>Found: <a href=https://httpstatuses.com/302>A HTTP 302 Response</a></li><li>SeeOther: <a href=https://httpstatuses.com/303>A HTTP 303 Response</a></li><li>Temporary: <a href=https://httpstatuses.com/307>A HTTP 307 Response</a></li></ul><p>That&rsquo;s it! Hopefully this article gives you everything that you need to get HTTP to HTTPS redirects working.</p></div></article><hr><div><p><i>If you haven't already, subscribe to my new <a href=https://bit.ly/im5tu-yt target=_blank>YouTube Channel</a>, Code With Stu. Here you'll find different tip, tricks and tutorials using some of the latest technologies, in bitesize chunks.</i></p></div><hr><div class=post-info><a name=series></a><b>More in the Url Rewriting series:</b><ol><li>Up and running with URL Rewrite - going from HTTP to HTTPS <i>(This article)</i></li><li><a href=/article/2017/06/canonical-host-urls-with-url-rewrite/>Canonical host urls with URL Rewrite</a></li><li><a href=/article/2017/06/removing-trailing-slashes-with-url-rewrite/>Removing trailing slashes with URL Rewrite</a></li><li><a href=/article/2017/06/ensuring-httponly-cookies-with-url-rewrite/>Ensuring httpOnly cookies with URL Rewrite</a></li><li><a href=/article/2017/06/ensuring-secure-cookies-with-url-rewrite/>Ensuring secure cookies with URL Rewrite</a></li><li><a href=/article/2017/06/ensuring-samesite-cookies-with-url-rewrite/>Ensuring samesite cookies with URL Rewrite</a></li></ol><p><a href=/article>View All Articles</a></p><hr><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://im5tu.io/tags/iis>IIS</a></span><span class=tag><a href=https://im5tu.io/tags/url-rewrite>Url Rewrite</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>605 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2017-06-03 15:00 +0100</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://im5tu.io/article/2017/06/canonical-host-urls-with-url-rewrite/><span class=button__icon>←</span>
<span class=button__text>Canonical host urls with URL Rewrite</span></a></span>
<span class="button next"><a href=https://im5tu.io/article/2017/05/domain-driven-design-notes/><span class=button__text>Domain Driven Design Notes</span>
<span class=button__icon>→</span></a></span></div></div><script src=https://utteranc.es/client.js repo=Im5tu/im5tu-hugo issue-term=url label=Comment theme=photon-dark crossorigin=anonymous async></script></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://im5tu.io/>Stuart Blackler</a></span>
<span><a href=https://im5tu.io/article/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>Theme made with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=/bundle.min.af435e44374f1e99a669ea8cd5bb9a2fceed80588941a451bfddb66b86a67c9f40b0f417e9543a763f809aa7e9300d7b1d69bf99615810ba02ac70396d50fad5.js integrity="sha512-r0NeRDdPHpmmaeqM1buaL87tgFiJQaRRv922a4amfJ9AsPQX6VQ6dj+AmqfpMA17HWm/mWFYELoCrHA5bVD61Q=="></script><script src=/js/site-20c12b24.js defer></script></body></html>